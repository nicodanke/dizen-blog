{"ast":null,"code":"var _jsxFileName = \"/Users/nicodanke/development/dizen/react-blog-template/src/pages/Posts.jsx\";\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport Navigation from '../components/Navigation/Navigation.jsx';\nimport Footer from '../components/Footer/Footer.jsx';\nimport CategoryFilter from '../components/CategoryFilter/CategoryFilter';\nimport Article from '../components/Article/Article';\nimport { BodyContainer, Container } from '../components/StyledComponents/StyledComponents';\nimport { ArticlesGrid } from '../components/Home/Style';\nimport { getPosts, getCategoryPathFromLeaf } from '../posts/Posts';\n\nconst Posts = () => {\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const location = useLocation();\n  const history = useHistory();\n  const [selectedPath, setSelectedPath] = useState(null); // Read category path from URL query parameter on mount\n\n  useEffect(() => {\n    const searchParams = new URLSearchParams(location.search);\n    const categoryParam = searchParams.get('category');\n\n    if (categoryParam) {\n      try {\n        const path = categoryParam.split(',').filter(Boolean);\n\n        if (path.length > 0) {\n          setSelectedPath(path);\n        }\n      } catch (error) {\n        console.error('Error parsing category path from URL:', error);\n      }\n    } else {\n      // Clear filter if no category param in URL\n      setSelectedPath(null);\n    }\n  }, [location.search]);\n  const allPosts = useMemo(() => getPosts(i18n.language), [i18n.language]);\n  const filteredPosts = useMemo(() => {\n    if (!selectedPath || selectedPath.length === 0) {\n      return allPosts;\n    }\n\n    return allPosts.filter(post => {\n      if (!post.categories || post.categories.length === 0) {\n        return false;\n      } // Check if any of the post's category paths starts with the selected path\n\n\n      return post.categories.some(postCategoryPath => {\n        // Check if selectedPath is a prefix of postCategoryPath\n        if (postCategoryPath.length < selectedPath.length) {\n          return false;\n        } // Check if all elements in selectedPath match the corresponding elements in postCategoryPath\n\n\n        return selectedPath.every((id, index) => id === postCategoryPath[index]);\n      });\n    });\n  }, [allPosts, selectedPath]);\n\n  const handleFilterChange = path => {\n    setSelectedPath(path); // Update URL with category path\n\n    const searchParams = new URLSearchParams();\n\n    if (path && path.length > 0) {\n      searchParams.set('category', path.join(','));\n    }\n\n    const newSearch = searchParams.toString();\n    const newUrl = newSearch ? `/posts?${newSearch}` : '/posts';\n    history.replace(newUrl);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navigation, {\n    page: \"posts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(BodyContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    top: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    leftAlign: true,\n    bottom: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  }, t('posts.title'))), /*#__PURE__*/React.createElement(CategoryFilter, {\n    onFilterChange: handleFilterChange,\n    initialSelectedPath: selectedPath,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(ArticlesGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, filteredPosts.map((post, index) => {\n    return /*#__PURE__*/React.createElement(Article, {\n      key: index,\n      route: post.route,\n      thumbnail: post.image,\n      title: post.title,\n      date: post.date,\n      description: post.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 33\n      }\n    });\n  })), filteredPosts.length === 0 && /*#__PURE__*/React.createElement(Container, {\n    top: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }, t('posts.noPostsFound'))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Posts;","map":{"version":3,"sources":["/Users/nicodanke/development/dizen/react-blog-template/src/pages/Posts.jsx"],"names":["React","useState","useMemo","useEffect","useTranslation","useLocation","useHistory","Navigation","Footer","CategoryFilter","Article","BodyContainer","Container","ArticlesGrid","getPosts","getCategoryPathFromLeaf","Posts","t","i18n","location","history","selectedPath","setSelectedPath","searchParams","URLSearchParams","search","categoryParam","get","path","split","filter","Boolean","length","error","console","allPosts","language","filteredPosts","post","categories","some","postCategoryPath","every","id","index","handleFilterChange","set","join","newSearch","toString","newUrl","replace","map","route","image","title","date","description"],"mappings":"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","sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport Navigation from '../components/Navigation/Navigation.jsx';\nimport Footer from '../components/Footer/Footer.jsx';\nimport CategoryFilter from '../components/CategoryFilter/CategoryFilter';\nimport Article from '../components/Article/Article';\nimport { BodyContainer, Container } from '../components/StyledComponents/StyledComponents';\nimport { ArticlesGrid } from '../components/Home/Style';\nimport { getPosts, getCategoryPathFromLeaf } from '../posts/Posts';\n\nconst Posts = () => {\n    const { t, i18n } = useTranslation();\n    const location = useLocation();\n    const history = useHistory();\n    const [selectedPath, setSelectedPath] = useState(null);\n\n    // Read category path from URL query parameter on mount\n    useEffect(() => {\n        const searchParams = new URLSearchParams(location.search);\n        const categoryParam = searchParams.get('category');\n\n        if (categoryParam) {\n            try {\n                const path = categoryParam.split(',').filter(Boolean);\n                if (path.length > 0) {\n                    setSelectedPath(path);\n                }\n            } catch (error) {\n                console.error('Error parsing category path from URL:', error);\n            }\n        } else {\n            // Clear filter if no category param in URL\n            setSelectedPath(null);\n        }\n    }, [location.search]);\n\n    const allPosts = useMemo(() => getPosts(i18n.language), [i18n.language]);\n\n    const filteredPosts = useMemo(() => {\n        if (!selectedPath || selectedPath.length === 0) {\n            return allPosts;\n        }\n\n        return allPosts.filter(post => {\n            if (!post.categories || post.categories.length === 0) {\n                return false;\n            }\n\n            // Check if any of the post's category paths starts with the selected path\n            return post.categories.some(postCategoryPath => {\n                // Check if selectedPath is a prefix of postCategoryPath\n                if (postCategoryPath.length < selectedPath.length) {\n                    return false;\n                }\n\n                // Check if all elements in selectedPath match the corresponding elements in postCategoryPath\n                return selectedPath.every((id, index) => id === postCategoryPath[index]);\n            });\n        });\n    }, [allPosts, selectedPath]);\n\n    const handleFilterChange = (path) => {\n        setSelectedPath(path);\n\n        // Update URL with category path\n        const searchParams = new URLSearchParams();\n        if (path && path.length > 0) {\n            searchParams.set('category', path.join(','));\n        }\n\n        const newSearch = searchParams.toString();\n        const newUrl = newSearch ? `/posts?${newSearch}` : '/posts';\n        history.replace(newUrl);\n    };\n\n    return (\n        <>\n            <Navigation page=\"posts\" />\n            <BodyContainer>\n                <Container top={8}>\n                    <Container leftAlign bottom={2}>\n                        <h1>{t('posts.title')}</h1>\n                    </Container>\n\n                    <CategoryFilter\n                        onFilterChange={handleFilterChange}\n                        initialSelectedPath={selectedPath}\n                    />\n\n                    <ArticlesGrid>\n                        {filteredPosts.map((post, index) => {\n                            return (\n                                <Article\n                                    key={index}\n                                    route={post.route}\n                                    thumbnail={post.image}\n                                    title={post.title}\n                                    date={post.date}\n                                    description={post.description}\n                                />\n                            );\n                        })}\n                    </ArticlesGrid>\n\n                    {filteredPosts.length === 0 && (\n                        <Container top={4}>\n                            <p>{t('posts.noPostsFound')}</p>\n                        </Container>\n                    )}\n                </Container>\n            </BodyContainer>\n            <Footer />\n        </>\n    );\n}\n\nexport default Posts;"]},"metadata":{},"sourceType":"module"}